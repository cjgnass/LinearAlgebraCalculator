
# Agent Instructions for Linear Algebra Calculator

This document contains instructions for AI agents (and human developers) working on this repository.
These guidelines ensure consistency, stability, and adherence to project standards.

## 1. Environment & Commands

### Build
- **Command:** `npm run build`
- **Details:** Runs TypeScript compilation (`tsc -b`) followed by Vite build.
- **Output:** Production assets are generated in the `dist/` directory.

### Linting & Formatting
- **Command:** `npm run lint`
- **Details:** Uses ESLint with a flat config (`eslint.config.js`).
- **Configuration:** 
  - Extends `js.configs.recommended`, `tseslint.configs.recommended`, `reactHooks.configs.flat.recommended`.
  - Strict type-checking is available but standard recommendations are currently enforced.

### Testing
- **Status:** No test runner (Jest/Vitest) is currently configured in `package.json`.
- **Instruction:** If asked to run tests, check if a test script has been added. If adding tests, prefer **Vitest** for compatibility with Vite.

### Development
- **Command:** `npm run dev`
- **Details:** Starts the Vite development server.

## 2. Code Style & Conventions

### General
- **Language:** TypeScript (`.ts`, `.tsx`).
- **Indentation:** 2 spaces.
- **Quotes:** Double quotes (`"`) preferred for strings and JSX attributes.
- **Semicolons:** Always use semicolons at the end of statements.

### TypeScript Configuration
- **Strictness:** `strict: true` is enabled. No `any` types unless absolutely necessary.
- **Imports:**
  - **Explicit Extensions:** You **MUST** use explicit file extensions in imports (e.g., `import { lex } from "./lexer.ts"`).
  - **Module Resolution:** Configured as `bundler` with `allowImportingTsExtensions: true`.

### React
- **Components:** Functional components with Hooks (`useState`, `useEffect`, `useMemo`).
- **JSX:** Use `react-jsx` transform (no need to import React just for JSX, though `import React` is still seen in some files).
- **Naming:**
  - Components: PascalCase (e.g., `Calculator.tsx`, `App.tsx`).
  - Functions/Variables: camelCase.
  - Files: Matches component name (e.g., `calculator.tsx`) or utility name (e.g., `lexer.ts`).

### File Structure
- **Root:** `src/` contains the main entry points (`main.tsx`, `App.tsx`).
- **Features:** Group related files in subdirectories (e.g., `src/calculator/`, `src/graph/`).
- **Styles:** CSS files are co-located with their components (e.g., `calculator.css` next to `calculator.tsx`).

### Error Handling
- Use `try...catch` blocks for operations that may throw.
- In parsers/lexers, handle unexpected input gracefully or throw descriptive errors to be caught by the UI layer.

## 3. Workflow for Agents

1.  **Analyze:** Always read `package.json` and `tsconfig.json` if you are unsure about dependencies or strictness.
2.  **Verify:** Before submitting changes, try to run `npm run build` to ensure no TypeScript errors were introduced.
3.  **Style:** Mimic the existing code style in the file you are editing.
4.  **Imports:** check for explicit extensions (`.ts`/`.tsx`) in imports.

## 4. Specific Rules

- **No `any`:** Avoid `any`. Define interfaces or types for all data structures.
- **Accessibility:** Maintain basic a11y (e.g., `aria-label` on buttons) as seen in `App.tsx`.
- **State Management:** Use local state (`useState`) or Context for global state if needed. Avoid external state libraries unless requested.

---
*Generated by opencode*
